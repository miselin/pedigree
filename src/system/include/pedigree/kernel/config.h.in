/*
 * Copyright (c) 2008-2019, Pedigree Developers
 *
 * Please see the CONTRIB file in the root of the source tree for a full
 * list of contributors.
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

/**
 * Many of the options in CMake are prefixed with "PEDIGREE_", so we need to
 * clean those up here as part of our full set of definitions.
 */

#cmakedefine01 PEDIGREE_TRAVIS
#define TRAVIS PEDIGREE_TRAVIS

#cmakedefine01 PEDIGREE_GRAPHICS
#define NOGFX !PEDIGREE_GRAPHICS

#cmakedefine01 PEDIGREE_CRIPPLE_HDD
#define CRIPPLE_HDD PEDIGREE_CRIPPLE_HDD

#cmakedefine01 PEDIGREE_DEBUGGER
#define DEBUGGER PEDIGREE_DEBUGGER

#cmakedefine01 PEDIGREE_ADDITIONAL_CHECKS
#define ADDITIONAL_CHECKS PEDIGREE_ADDITIONAL_CHECKS

#cmakedefine01 PEDIGREE_EXCESSIVE_ADDITIONAL_CHECKS
#define EXCESSIVE_ADDITIONAL_CHECKS PEDIGREE_EXCESSIVE_ADDITIONAL_CHECKS

#cmakedefine01 PEDIGREE_ASSERTS
#define ASSERTS PEDIGREE_ASSERTS

#cmakedefine01 PEDIGREE_DEBUG_LOGGING
#define DEBUG_LOGGING PEDIGREE_DEBUG_LOGGING

#cmakedefine01 PEDIGREE_SUPERDEBUG
#define SUPERDEBUG PEDIGREE_SUPERDEBUG

#cmakedefine01 PEDIGREE_TRACING
#define TRACING PEDIGREE_TRACING

#cmakedefine01 PEDIGREE_DEBUG_ALLOCATOR
#define DEBUG_ALLOCATOR PEDIGREE_DEBUG_ALLOCATOR

#cmakedefine01 PEDIGREE_SERIAL_IS_FILE
#define SERIAL_IS_FILE PEDIGREE_SERIAL_IS_FILE

#cmakedefine01 PEDIGREE_MEMORY_LOG
#define MEMORY_LOGGING_ENABLED PEDIGREE_MEMORY_LOG

#cmakedefine01 PEDIGREE_MEMORY_LOG_INLINE
#define MEMORY_LOG_INLINE PEDIGREE_MEMORY_LOG_INLINE

#cmakedefine01 PEDIGREE_MEMORY_TRACING
#ifndef MEMORY_TRACING  // sometimes specified on the command line
#define MEMORY_TRACING PEDIGREE_MEMORY_TRACING
#endif

#cmakedefine01 PEDIGREE_TRACK_LOCKS
#define TRACK_LOCKS PEDIGREE_TRACK_LOCKS

#cmakedefine01 PEDIGREE_MULTIPROCESSOR
#define MULTIPROCESSOR PEDIGREE_MULTIPROCESSOR
#define APIC MULTIPROCESSOR
#define SMP MULTIPROCESSOR

#cmakedefine01 PEDIGREE_ACPI
#define ACPI PEDIGREE_ACPI

#cmakedefine01 PEDIGREE_GRAPHICS
#define GRAPHICS PEDIGREE_GRAPHICS

#cmakedefine01 PEDIGREE_TRACK_HIDDEN_SYMBOLS
#define TRACK_HIDDEN_SYMBOLS PEDIGREE_TRACK_HIDDEN_SYMBOLS

#cmakedefine01 PEDIGREE_LIVECD
#define LIVECD PEDIGREE_LIVECD

#cmakedefine01 PEDIGREE_PEDANTIC
#define PEDANTIC_PEDIGREE PEDIGREE_PEDANTIC

#cmakedefine01 PEDIGREE_HOSTED_SYSTEM_MALLOC
#define HOSTED_SYSTEM_MALLOC PEDIGREE_HOSTED_SYSTEM_MALLOC

#cmakedefine01 PEDIGREE_VERBOSE_KERNEL
#define VERBOSE_KERNEL PEDIGREE_VERBOSE_KERNEL

#cmakedefine01 PEDIGREE_DEBUG_ALLOCATOR
#define SLAM_USE_DEBUG_ALLOCATOR PEDIGREE_DEBUG_ALLOCATOR
#define USE_DEBUG_ALLOCATOR PEDIGREE_DEBUG_ALLOCATOR

#cmakedefine01 PEDIGREE_POSIX_NOEFAULT
#define POSIX_NO_EFAULT PEDIGREE_POSIX_NOEFAULT

#cmakedefine01 _OPENSSL_FOUND
#define HAVE_OPENSSL _OPENSSL_FOUND

#cmakedefine01 PEDIGREE_DEBUGGER_RUN_AT_START
#define DEBUGGER_RUN_AT_START PEDIGREE_DEBUGGER_RUN_AT_START

#cmakedefine01 PEDIGREE_LOG_TO_SERIAL
#define LOG_TO_SERIAL PEDIGREE_LOG_TO_SERIAL
#define DONT_LOG_TO_SERIAL !PEDIGREE_LOG_TO_SERIAL

#cmakedefine01 PEDIGREE_STATIC_DRIVERS
#ifndef STATIC_DRIVERS
#define STATIC_DRIVERS PEDIGREE_STATIC_DRIVERS
#endif

#cmakedefine01 PEDIGREE_HOSTED
#define HOSTED PEDIGREE_HOSTED

#cmakedefine01 PEDIGREE_STRICT_LOCK_ORDERING
#define STRICT_LOCK_ORDERING PEDIGREE_STRICT_LOCK_ORDERING

#cmakedefine01 PEDIGREE_LOGGING
#define LOGGING PEDIGREE_LOGGING

#cmakedefine01 PEDIGREE_TRACK_PAGE_ALLOCS
#define TRACK_PAGE_ALLOCATIONS PEDIGREE_TRACK_PAGE_ALLOCS

#cmakedefine01 PEDIGREE_VERBOSE_MEMORY_MANAGER
#define VERBOSE_MEMORY_MANAGER PEDIGREE_VERBOSE_MEMORY_MANAGER

#cmakedefine01 PEDIGREE_MACHINE_HASPCI

/** Clean up less common machine/target specific definitions. */

#ifndef SYSTEM_REQUIRES_ATOMIC_CONTEXT_SWITCH
#define SYSTEM_REQUIRES_ATOMIC_CONTEXT_SWITCH 0
#endif

/// \todo do we ever omit the frame pointer?
#define OMIT_FRAMEPOINTER 0


/** Clean up target definitions if needed. **/

#ifndef X86
#define X86 0
#endif

#ifndef X64
#define X64 0
#endif

#ifndef MIPS32
#define MIPS32 0
#endif

#ifndef MIPS64
#define MIPS64 0
#endif

#ifndef ARM926E
#define ARM926E 0
#endif

#ifndef PPC32
#define PPC32 0
#endif

#ifndef ARMV7
#define ARMV7 0
#endif

#ifndef HOSTED
#define HOSTED 0
#endif

#ifndef HOSTED_X64
#define HOSTED_X64 0
#endif

#ifndef X86_COMMON
#define X86_COMMON 0
#endif

#ifndef HOSTED_X86_COMMON
#define HOSTED_X86_COMMON 0
#endif

#ifndef ARM_COMMON
#define ARM_COMMON 0
#endif

#ifndef ARM_BEAGLE
#define ARM_BEAGLE 0
#endif

#ifndef MIPS_COMMON
#define MIPS_COMMON 0
#endif

#ifndef PPC_COMMON
#define PPC_COMMON 0
#endif

#ifndef UTILITY_LINUX_COVERAGE
#define UTILITY_LINUX_COVERAGE 0
#endif

#ifndef VFS_NOMMU
#define VFS_NOMMU 0
#endif
